<!DOCTYPE html>
<link href="/css/report.css" rel="stylesheet">
<body>
<style>
.download-pdf-button 
{
    height:120px; 
    width:120px; 
    border-radius:50%; 
    position: absolute; 
    right:50px; 
    bottom:30px; 
    background-color:#0074D9; 
    color:white; 
    outline:none;
    border: none;
}

.download-pdf-button:hover{
    opacity: 0.75;
}

.list-group {
    //overflow: hidden;
    border-left: 1px solid rgb(221, 221, 221);
    border-right: 1px solid rgb(221, 221, 221);
}
.list-group-item:first-child, .list-group-item:last-child {
    border-top-right-radius: 0px;
    border-top-left-radius: 0px;
    border-bottom-right-radius: 0px;
    border-bottom-left-radius: 0px;
    overflow: hidden;
}
.list-group-item {
    border-left: 0px solid rgb(221, 221, 221);
    border-right: 0px solid rgb(221, 221, 221);
    -webkit-transition: all 0.5s ease-in-out;
    -moz-transition: all 0.5s ease-in-out;
    -o-transition: all 0.5s ease-in-out;
    -ms-transition: all 0.5s ease-in-out;
    transition: all 0.5s ease-in-out;
    
}
.list-group-item > .task-link >.show-menu {
    position: absolute;
    height: 100%; 
    width: 6px;
    top: 0px; right: 0px;
    text-decoration: none !important;
    background-color: rgba(51, 51, 51, 0.2);
    cursor: pointer;
    -webkit-transition: all 0.5s ease-in-out;
    -moz-transition: all 0.5s ease-in-out;
    -o-transition: all 0.5s ease-in-out;
    -ms-transition: all 0.5s ease-in-out;
    transition: all 0.5s ease-in-out;
}

.list-group-item > .task-link >.show-menu.P1 {
    background-color: #FF4136;
}

.list-group-item > .task-link >.show-menu.P2 {
    background-color: #0074D9;
}

.list-group-item > .task-link >.show-menu.P3 {
    background-color: #3D9970;
}

.list-group-item > .task-link > .show-menu > span {
    position: absolute;
    top: 50%;
    margin-top: -7px;
    padding: 0px 5px;
}
.list-group-submenu {
    position: absolute;
    top: 0px;
    right: -88px;
    white-space: nowrap;
    list-style: none;
    padding-left: 0px;
    -webkit-transition: all 0.5s ease-in-out;
    -moz-transition: all 0.5s ease-in-out;
    -o-transition: all 0.5s ease-in-out;
    -ms-transition: all 0.5s ease-in-out;
    transition: all 0.5s ease-in-out;
}
.list-group-submenu .list-group-submenu-item {
    float: right;
    white-space: nowrap;
    display: block;
    padding: 10px 15px;
    margin-bottom: -1px;
    background-color: rgb(51, 51, 51);
    color: rgb(235, 235, 235);
}
.list-group-item.open {
    margin-left: -88px;
}
.list-group-item.open > .task-link > .show-menu {
    right: 88px;
}
.list-group-item.open > .task-link > .list-group-submenu{
    right: 0px;
}
.list-group-submenu .list-group-submenu-item.primary {
    color: rgb(255, 255, 255);
    background-color: rgb(50, 118, 177);
}
.list-group-submenu .list-group-submenu-item.success {
    color: rgb(255, 255, 255);
    background-color: rgb(92, 184, 92);
}
.list-group-submenu .list-group-submenu-item.info {
    color: rgb(255, 255, 255);
    background-color: rgb(57, 179, 215);
}
.list-group-submenu .list-group-submenu-item.warning {
    color: rgb(255, 255, 255);
    background-color: rgb(240, 173, 78);
}
.list-group-submenu .list-group-submenu-item.danger {
    color: rgb(255, 255, 255);
    background-color: rgb(217, 83, 79);
}

/* CSS classes for left menu bar*/
.animate {
    -webkit-transition: all 0.3s ease-in-out;
    -moz-transition: all 0.3s ease-in-out;
    -o-transition: all 0.3s ease-in-out;
    -ms-transition: all 0.3s ease-in-out;
    transition: all 0.3s ease-in-out;
}

.navbar-fixed-left {
    position: fixed;
    top: 0px;
    left: 0px;
    border-radius: 0px;
}

.navbar-minimal {
    width: 60px;        
    min-height: 60px;
    max-height: 100%;
    background-color: rgb(51, 51, 51);
    background-color: rgba(51, 51, 51, 0.8);
    border-width: 0px;
    z-index: 1000;
}

.navbar-minimal > .navbar-toggler {
    position: relative;
    min-height: 60px;
    border-bottom: 1px solid rgb(81, 81, 81);
    z-index: 100;
    cursor: pointer;
}

.navbar-minimal.open > .navbar-toggler,
.navbar-minimal > .navbar-toggler:hover {
    background-color:#0074D9; 
}

.navbar-minimal > .navbar-toggler > span {
    position: absolute;
    top: 50%;
    right: 50%;
    margin: -8px -8px 0 0;
    width: 16px;
    height: 16px;
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAxNiAzMiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTEsN2gxNGMwLjU1MiwwLDEsMC40NDgsMSwxcy0wLjQ0OCwxLTEsMUgxQzAuNDQ4LDksMCw4LjU1MiwwLDgKCVMwLjQ0OCw3LDEsN3oiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNGRkZGRkYiIGQ9Ik0xLDEyaDE0YzAuNTUyLDAsMSwwLjQ0OCwxLDFzLTAuNDQ4LDEtMSwxSDFjLTAuNTUyLDAtMS0wLjQ0OC0xLTEKCVMwLjQ0OCwxMiwxLDEyeiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTEsMmgxNGMwLjU1MiwwLDEsMC40NDgsMSwxcy0wLjQ0OCwxLTEsMUgxQzAuNDQ4LDQsMCwzLjU1MiwwLDMKCVMwLjQ0OCwyLDEsMnoiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNGRkZGRkYiIGQ9Ik0xLjMzLDI4Ljk3bDExLjY0LTExLjY0YzAuNDU5LTAuNDU5LDEuMjA0LTAuNDU5LDEuNjYzLDAKCWMwLjQ1OSwwLjQ1OSwwLjQ1OSwxLjIwNCwwLDEuNjYzTDIuOTkzLDMwLjYzM2MtMC40NTksMC40NTktMS4yMDQsMC40NTktMS42NjMsMEMwLjg3MSwzMC4xNzQsMC44NzEsMjkuNDMsMS4zMywyOC45N3oiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yLjk5MywxNy4zM2wxMS42NDEsMTEuNjRjMC40NTksMC40NTksMC40NTksMS4yMDQsMCwxLjY2MwoJcy0xLjIwNCwwLjQ1OS0xLjY2MywwTDEuMzMsMTguOTkzYy0wLjQ1OS0wLjQ1OS0wLjQ1OS0xLjIwNCwwLTEuNjYzQzEuNzg5LDE2Ljg3MSwyLjUzNCwxNi44NzEsMi45OTMsMTcuMzN6Ii8+Cjwvc3ZnPgo=);
    background-repeat: no-repeat;
    background-position: 0 0;
    -webkit-transition: -webkit-transform .3s ease-out 0s;
    -moz-transition: -moz-transform .3s ease-out 0s;
    -o-transition: -moz-transform .3s ease-out 0s;
    -ms-transition: -ms-transform .3s ease-out 0s;
    transition: transform .3s ease-out 0s;
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
}

.navbar-minimal > .navbar-menu {
    position: absolute;
    top: -1000px;
    left: 0px;
    margin: 0px;
    padding: 0px;
    list-style: none;
    z-index: 50;
    background-color: rgb(51, 51, 51);
    background-color: rgba(51, 51, 51, 0.8);
}
.navbar-minimal > .navbar-menu > li {
    margin: 0px;
    padding: 0px;
    border-width: 0px;
    height: 54px;
}
.navbar-minimal > .navbar-menu > li > a {
    position: relative;
    display: inline-block;
    color: rgb(255, 255, 255);
    padding: 20px 23px;
    text-align: left;
    cursor: pointer;
    border-bottom: 1px solid rgb(81, 81, 81);
    width: 100%;
    text-decoration: none;
    margin: 0px;
}

.navbar-minimal > .navbar-menu > li > a:last-child {
    border-bottom-width: 0px;
}
.navbar-minimal > .navbar-menu > li > a:hover {
    background-color:#0074D9;
    opacity: 0.75; 
}
.navbar-minimal > .navbar-menu > li > a > .glyphicon {
    float: right;
}

.navbar-minimal.open {
    width: 320px;
}

.navbar-minimal.open > .navbar-toggler > span {
    background-position: 0 -16px;
    -webkit-transform: rotate(-180deg);
    -moz-transform: rotate(-180deg);
    -o-transform: rotate(-180deg);
    -ms-transform: rotate(-180deg);
    transform: rotate(-180deg);
}

.navbar-minimal.open > .navbar-menu {
    top: 60px;
    width: 100%;
    min-height: 100%;
}

@media (min-width: 768px) {
    .navbar-minimal.open {
        width: 60px;
    }
    .navbar-minimal.open > .navbar-menu {
        overflow: visible;
    }
    .navbar-minimal > .navbar-menu > li > a > .desc {
        position: absolute;
        display: inline-block;
        top: 50%;
        left: 130px;
        margin-top: -20px;
        margin-left: 20px;
        text-align: left;
        white-space: nowrap;
        padding: 10px 13px;
        border-width: 0px !important;
        background-color: rgb(51, 51, 51);
        background-color: rgba(51, 51, 51, 0.8);
        opacity: 0;
    }
    .navbar-minimal > .navbar-menu > li > a > .desc:after {
        z-index: -1;
        position: absolute;
        top: 50%;
        left: -10px;
        margin-top: -10px;
        content:'';
        width: 0;
        height: 0;
        border-top: 10px solid transparent;
        border-bottom: 10px solid transparent;  
        border-right: 10px solid rgb(51, 51, 51);
        border-right-color: rgba(51, 51, 51, 0.8);
    }
    .navbar-minimal > .navbar-menu > li > a:hover > .desc {
        left: 60px;
        opacity: 1;
    }
}
/**/

</style>
<div id="content">
<div class="container">
<nav class="navbar navbar-fixed-left navbar-minimal animate" role="navigation">
    <div class="navbar-toggler animate">
        <span class="menu-icon"></span>
    </div>
    <ul class="navbar-menu animate">
        <li>
            <a ng-href="/#/boards" class="animate">
                <span class="desc animate"> Boards </span>
                <span class="glyphicon glyphicon-th"></span>
            </a>
        </li>
        <li>
            <a href="/#/team" class="animate">
                <span class="desc animate"> Team </span>
                <span class="glyphicon glyphicon-user"></span>
            </a>
        </li>
        <li>
            <a href="/#/report" class="animate">
                <span class="desc animate"> Report </span>
                <span class="glyphicon glyphicon-list"></span>
            </a>
        </li>
        <li>
            <a href="" class="animate" ng-click="logout()">
                <span class="desc animate"> Logout </span>
                <span class="glyphicon glyphicon-arrow-left"></span>
            </a>
        </li>
    </ul>
</nav>



<center><h2>Customer Reports</h2></center>
    <div class="row">
    <div class="input-group">
        <div class="input-group-btn">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Created By <span class="caret"></span></button>
            <ul class="dropdown-menu">
                <li><a href="" ng-click="selectedCreatedBy()">Created By</a></li>
                <li><a href="" ng-click="selectedAssignedTo()">Assigned To</a></li>
                <li><a href="" ng-click="selectedBoards()">Board</a></li>
            </ul>
        </div><!-- /btn-group -->
        <input type="text" aria-label="..." ng-model="searchInput" ng-keyup="searchInputKeyEvent($event)" autocomplete="off" style="height: 100%;"><button ng-click="searchTasks()" style="height: 100%;">Search</button>
        <ul style="padding:0; position: absolute; z-index: 3; list-style-type: none; width:200px;">
        <li ng-if="searchSelector == 'createdBy' || searchSelector == 'assignedTo'" ng-repeat="searchResult in searchResults"><button type="button" ng-click="selectUser(searchResult)" style="height:40px; width:230px;">{{searchResult.username}}</button></li>
        <li ng-if="searchSelector == 'boards'" ng-repeat="searchResult in searchResults"><button type="button" ng-click="selectBoard(searchResult)" style="height:40px; width:230px;">{{searchResult.title}}</button></li>
        </ul>
    </div><!-- /input-group -->
    </div>

  <button onclick="generate()" class="download-pdf-button">Generate PDF</button>
  <table id="table" class="table table-hover">
    <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Creator</th>
            <th>Description</th>
            <th>Workflow</th>
            <th>Priority</th>
            <th>Progress</th>
            <th>Due Date</th>
            <th>Assignee</th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="task in tasks">
            <td>{{task._id}}</td>
            <td>{{task.title}}</td>
            <td>{{task.creator.username}}</td>
            <td>{{task.description}}</td>
            <td>{{task.workflow.title}}</td>
            <td>{{task.priority}}</td>
            <td>{{task.progress}}</td>
            <td ng-if="task.dueDate">{{task.dueDate}}</td>
            <td ng-if="!task.dueDate">none</td>
            <td ng-if="task.assignee.username">{{task.assignee.username}}</td> 
            <td ng-if="!task.assignee.username">none</td>           
        </tr>
    </tbody>
  </table>
</div>
</div>

<!--<div id="content">
    <h1>
        We support special element handlers. Register them with jQuery-style.
    </h1>
</div> -->
</body>
<script>
  //Controlls
  $(".dropdown-menu li a").click(function(){
    $(".btn:first-child").html($(this).text()+' <span class="caret"></span>');
  });
//plugin
function generate() {
  var doc = new jsPDF('p', 'pt');
  var elem = document.getElementById('table');
  var data = doc.autoTableHtmlToJson(elem);
  var opts = {};
//  doc.autoTable(data.columns, data.rows, opts);
doc.setFontSize(40);
//doc.text(100, 25, "Customer Reports");
doc.autoTable(data.columns, data.rows, {
    styles: {overflow: 'linebreak'},
    columnStyles: {
        id: {fillColor: 255}
    },
    margin: {top: 60},
    margin: {horizontal: 10},
    beforePageContent: function(data) {
        //doc.text("Overflow 'linebreak'", 10, doc.autoTableEndPosY() + 30);
        //doc.setFontSize(40);
        //doc.text(100, 25, "Customer Reports");
    }
});
  doc.save("Reports.pdf");
}
</script>